"use strict";(globalThis.webpackChunkdoeks_website=globalThis.webpackChunkdoeks_website||[]).push([[1243],{25532(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"infra/trainium","title":"trainium","description":"EKS\uc5d0\uc11c ML \ubaa8\ub378\uc744 \ubc30\ud3ec\ud558\ub824\uba74 GPU \ub610\ub294 Neuron \uc778\uc2a4\ud134\uc2a4\uc5d0 \ub300\ud55c \uc561\uc138\uc2a4\uac00 \ud544\uc694\ud569\ub2c8\ub2e4. \ubc30\ud3ec\uac00 \uc791\ub3d9\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0 \uc774\ub7ec\ud55c \ub9ac\uc18c\uc2a4\uc5d0 \ub300\ud55c \uc561\uc138\uc2a4\uac00 \ub204\ub77d\ub418\uc5b4 \uc788\ub294 \uacbd\uc6b0\uac00 \ub9ce\uc2b5\ub2c8\ub2e4. \ub610\ud55c \uc77c\ubd80 \ubc30\ud3ec \ud328\ud134\uc740 Karpenter \uc790\ub3d9 \ud655\uc7a5 \ubc0f \uc815\uc801 \ub178\ub4dc \uadf8\ub8f9\uc5d0 \uc758\uc874\ud569\ub2c8\ub2e4. \ub178\ub4dc\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\ub294 \uacbd\uc6b0 Karpenter \ub610\ub294 \ub178\ub4dc \uadf8\ub8f9\uc758 \ub85c\uadf8\ub97c \ud655\uc778\ud558\uc5ec \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uc138\uc694.","source":"@site/i18n/ko/docusaurus-plugin-content-docs/current/infra/trainium.md","sourceDirName":"infra","slug":"/infra/trainium","permalink":"/ai-on-eks/ko/docs/infra/trainium","draft":false,"unlisted":false,"editUrl":"https://github.com/awslabs/ai-on-eks/blob/main/website/docs/infra/trainium.md","tags":[],"version":"current","frontMatter":{"sidebar_label":"EKS \uae30\ubc18 Trainium"},"sidebar":"infra","previous":{"title":"EKS \uae30\ubc18 JupyterHub","permalink":"/ai-on-eks/ko/docs/infra/jupyterhub"},"next":{"title":"\ubb38\uc81c \ud574\uacb0","permalink":"/ai-on-eks/ko/docs/infra/troubleshooting/"}}');var s=r(74848),o=r(28453),t=r(42450);const l={sidebar_label:"EKS \uae30\ubc18 Trainium"},a="EKS \uae30\ubc18 AWS Trainium",c={},d=[{value:"Trainium \uc7a5\uce58 \uc544\ud0a4\ud14d\ucc98",id:"trainium-\uc7a5\uce58-\uc544\ud0a4\ud14d\ucc98",level:4},{value:"AWS Neuron \ub4dc\ub77c\uc774\ubc84",id:"aws-neuron-\ub4dc\ub77c\uc774\ubc84",level:4},{value:"AWS Neuron \ub7f0\ud0c0\uc784",id:"aws-neuron-\ub7f0\ud0c0\uc784",level:4},{value:"Kubernetes\uc6a9 AWS Neuron Device Plugin",id:"kubernetes\uc6a9-aws-neuron-device-plugin",level:4},{value:"FSx for Lustre",id:"fsx-for-lustre",level:4},{value:"TorchX",id:"torchx",level:4},{value:"Volcano Scheduler",id:"volcano-scheduler",level:4},{value:"\uc194\ub8e8\uc158 \uc544\ud0a4\ud14d\ucc98",id:"\uc194\ub8e8\uc158-\uc544\ud0a4\ud14d\ucc98",level:3},{value:"\uc0ac\uc804 \uc694\uad6c \uc0ac\ud56d",id:"\uc0ac\uc804-\uc694\uad6c-\uc0ac\ud56d",level:3},{value:"\ubc30\ud3ec",id:"\ubc30\ud3ec",level:3},{value:"\ub9ac\uc18c\uc2a4 \ud655\uc778",id:"\ub9ac\uc18c\uc2a4-\ud655\uc778",level:3},{value:"AWS CloudWatch \ubc0f Neuron Monitor\ub97c \uc0ac\uc6a9\ud55c \uad00\uce21\uc131",id:"aws-cloudwatch-\ubc0f-neuron-monitor\ub97c-\uc0ac\uc6a9\ud55c-\uad00\uce21\uc131",level:3},{value:"TorchX \ubc0f EKS\ub97c \uc0ac\uc6a9\ud55c Trainium\uc5d0\uc11c\uc758 \ubd84\uc0b0 PyTorch \ud6c8\ub828",id:"torchx-\ubc0f-eks\ub97c-\uc0ac\uc6a9\ud55c-trainium\uc5d0\uc11c\uc758-\ubd84\uc0b0-pytorch-\ud6c8\ub828",level:3},{value:"1\ub2e8\uacc4: BERT-large \ubaa8\ub378 \uc0ac\uc804 \ud6c8\ub828\uc744 \uc704\ud55c PyTorch Neuron \ucee8\ud14c\uc774\ub108\uc6a9 Docker \uc774\ubbf8\uc9c0 \uc0dd\uc131",id:"1\ub2e8\uacc4-bert-large-\ubaa8\ub378-\uc0ac\uc804-\ud6c8\ub828\uc744-\uc704\ud55c-pytorch-neuron-\ucee8\ud14c\uc774\ub108\uc6a9-docker-\uc774\ubbf8\uc9c0-\uc0dd\uc131",level:4},{value:"2\ub2e8\uacc4: BERT \ubaa8\ub378\uc6a9 WikiCorpus \uc0ac\uc804 \ud6c8\ub828 \ub370\uc774\ud130\uc14b\uc744 FSx for Lustre \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc5d0 \ubcf5\uc0ac",id:"2\ub2e8\uacc4-bert-\ubaa8\ub378\uc6a9-wikicorpus-\uc0ac\uc804-\ud6c8\ub828-\ub370\uc774\ud130\uc14b\uc744-fsx-for-lustre-\ud30c\uc77c-\uc2dc\uc2a4\ud15c\uc5d0-\ubcf5\uc0ac",level:4},{value:"3\ub2e8\uacc4: neuron_parallel_compile\uc744 \uc0ac\uc6a9\ud558\uc5ec BERT \uadf8\ub798\ud504 \uc0ac\uc804 \ucef4\ud30c\uc77c",id:"3\ub2e8\uacc4-neuron_parallel_compile\uc744-\uc0ac\uc6a9\ud558\uc5ec-bert-\uadf8\ub798\ud504-\uc0ac\uc804-\ucef4\ud30c\uc77c",level:4},{value:"4\ub2e8\uacc4: \ub450 \uac1c\uc758 trn1.32xlarge \uc778\uc2a4\ud134\uc2a4\ub85c 64\uac1c\uc758 Neuron \ucf54\uc5b4\ub97c \uc0ac\uc6a9\ud558\uc5ec BERT \uc0ac\uc804 \ud6c8\ub828 \uc791\uc5c5 \uc2dc\uc791",id:"4\ub2e8\uacc4-\ub450-\uac1c\uc758-trn132xlarge-\uc778\uc2a4\ud134\uc2a4\ub85c-64\uac1c\uc758-neuron-\ucf54\uc5b4\ub97c-\uc0ac\uc6a9\ud558\uc5ec-bert-\uc0ac\uc804-\ud6c8\ub828-\uc791\uc5c5-\uc2dc\uc791",level:4}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"EKS\uc5d0\uc11c ML \ubaa8\ub378\uc744 \ubc30\ud3ec\ud558\ub824\uba74 GPU \ub610\ub294 Neuron \uc778\uc2a4\ud134\uc2a4\uc5d0 \ub300\ud55c \uc561\uc138\uc2a4\uac00 \ud544\uc694\ud569\ub2c8\ub2e4. \ubc30\ud3ec\uac00 \uc791\ub3d9\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0 \uc774\ub7ec\ud55c \ub9ac\uc18c\uc2a4\uc5d0 \ub300\ud55c \uc561\uc138\uc2a4\uac00 \ub204\ub77d\ub418\uc5b4 \uc788\ub294 \uacbd\uc6b0\uac00 \ub9ce\uc2b5\ub2c8\ub2e4. \ub610\ud55c \uc77c\ubd80 \ubc30\ud3ec \ud328\ud134\uc740 Karpenter \uc790\ub3d9 \ud655\uc7a5 \ubc0f \uc815\uc801 \ub178\ub4dc \uadf8\ub8f9\uc5d0 \uc758\uc874\ud569\ub2c8\ub2e4. \ub178\ub4dc\uac00 \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\ub294 \uacbd\uc6b0 Karpenter \ub610\ub294 \ub178\ub4dc \uadf8\ub8f9\uc758 \ub85c\uadf8\ub97c \ud655\uc778\ud558\uc5ec \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uc138\uc694."})}),"\n",(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"eks-\uae30\ubc18-aws-trainium",children:"EKS \uae30\ubc18 AWS Trainium"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://aws.amazon.com/machine-learning/trainium/",children:"AWS Trainium"}),"\uc740 \uace0\uc131\ub2a5 \ub525\ub7ec\ub2dd(DL) \ud6c8\ub828\uc744 \ud601\uc2e0\ud558\ub294 \uace0\uae09 ML \uac00\uc18d\uae30\uc785\ub2c8\ub2e4. AWS Trainium \uce69\uc73c\ub85c \uad6c\ub3d9\ub418\ub294 ",(0,s.jsx)(n.code,{children:"Trn1"})," \uc778\uc2a4\ud134\uc2a4\ub294 ",(0,s.jsx)(n.strong,{children:"1000\uc5b5\uac1c \uc774\uc0c1\uc758 \ud30c\ub77c\ubbf8\ud130"})," \ubaa8\ub378\uc758 \uace0\uc131\ub2a5 DL \ud6c8\ub828\uc744 \uc704\ud574 \ud2b9\ubcc4\ud788 \uc81c\uc791\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ud0c1\uc6d4\ud55c \uc131\ub2a5\uc744 \uc704\ud574 \uc138\uc2ec\ud558\uac8c \uc124\uacc4\ub41c Trn1 \uc778\uc2a4\ud134\uc2a4\ub294 AWS\uc5d0\uc11c \uc778\uae30 \uc788\ub294 \uc790\uc5f0\uc5b4 \ucc98\ub9ac(NLP) \ubaa8\ub378 \ud6c8\ub828\uc5d0 \ud2b9\ud654\ub418\uc5b4 GPU \uae30\ubc18 EC2 \uc778\uc2a4\ud134\uc2a4\uc5d0 \ube44\ud574 ",(0,s.jsx)(n.strong,{children:"\ucd5c\ub300 50% \ube44\uc6a9 \uc808\uac10"}),"\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4. \uc774\ub7ec\ud55c \ube44\uc6a9 \ud6a8\uc728\uc131\uc73c\ub85c \uc778\ud574 \uc131\ub2a5 \uc800\ud558 \uc5c6\uc774 \ucd5c\uc801\ud654\ub41c \ud6c8\ub828 \ube44\uc6a9\uc744 \uc6d0\ud558\ub294 \ub370\uc774\ud130 \uacfc\ud559\uc790\uc640 ML \uc2e4\ubb34\uc790\uc5d0\uac8c \ub9e4\ub825\uc801\uc778 \uc635\uc158\uc774 \ub429\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(n.p,{children:["Trn1 \uc778\uc2a4\ud134\uc2a4 \uae30\ub2a5\uc758 \ud575\uc2ec\uc5d0\ub294 ",(0,s.jsx)(n.a,{href:"https://awsdocs-neuron.readthedocs-hosted.com/en/latest/",children:"AWS Neuron SDK"}),"\uac00 \uc788\uc2b5\ub2c8\ub2e4. \uc774 \uc18c\ud504\ud2b8\uc6e8\uc5b4 \uac1c\ubc1c \ud0a4\ud2b8\ub294 ",(0,s.jsx)(n.a,{href:"https://pytorch.org/",children:"PyTorch"}),", ",(0,s.jsx)(n.a,{href:"https://tensorflow.org/",children:"TensorFlow"}),", ",(0,s.jsx)(n.a,{href:"https://huggingface.co/docs/accelerate/usage_guides/megatron_lm",children:"Megatron-LM"}),", ",(0,s.jsx)(n.a,{href:"https://huggingface.co/",children:"Hugging Face"}),"\uc640 \uac19\uc740 \uc8fc\uc694 ML \ud504\ub808\uc784\uc6cc\ud06c \ubc0f \ub77c\uc774\ube0c\ub7ec\ub9ac\uc640 \uc6d0\ud65c\ud558\uac8c \ud1b5\ud569\ub429\ub2c8\ub2e4. Neuron SDK\ub97c \ud1b5\ud574 \uac1c\ubc1c\uc790\ub294 \uba87 \uc904\uc758 \ucf54\ub4dc \ubcc0\uacbd\ub9cc\uc73c\ub85c Trainium\uc5d0\uc11c NLP, \ucef4\ud4e8\ud130 \ube44\uc804 \ubc0f \ucd94\ucc9c \ubaa8\ub378\uc744 \uc27d\uac8c \ud6c8\ub828\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(n.p,{children:["\uc774 \ube14\ub8e8\ud504\ub9b0\ud2b8\uc5d0\uc11c\ub294 Trainium \ub178\ub4dc \uadf8\ub8f9(",(0,s.jsx)(n.code,{children:"Trn1.32xlarge"})," \ubc0f ",(0,s.jsx)(n.code,{children:"Trn1n.32xlarge"}),")\uacfc \ud544\uc694\ud55c \ubaa8\ub4e0 \ud50c\ub7ec\uadf8\uc778(EC2\uc6a9 EFA \ud328\ud0a4\uc9c0, Neuron Device K8s \ud50c\ub7ec\uadf8\uc778 \ubc0f EFA K8s \ud50c\ub7ec\uadf8\uc778)\uc774 \ud3ec\ud568\ub41c ",(0,s.jsx)(n.a,{href:"https://docs.aws.amazon.com/eks/latest/userguide/clusters.html",children:"Amazon EKS \ud074\ub7ec\uc2a4\ud130"}),"\ub97c \uc548\uc804\ud558\uac8c \ubc30\ud3ec\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6c1\ub2c8\ub2e4. \ubc30\ud3ec\uac00 \uc644\ub8cc\ub418\uba74 WikiCorpus \ub370\uc774\ud130\uc14b\uc744 \uc0ac\uc6a9\ud558\uc5ec \ubd84\uc0b0 PyTorch \uc0ac\uc804 \ud6c8\ub828\uc73c\ub85c BERT-large(Bidirectional Encoder Representations from Transformers) \ubaa8\ub378\uc744 \ud6c8\ub828\ud558\ub294 \ubc29\ubc95\uc744 \ubc30\uc6c1\ub2c8\ub2e4. \ubd84\uc0b0 \ud6c8\ub828 \uc791\uc5c5\uc744 \uc608\uc57d\ud558\uae30 \uc704\ud574 ",(0,s.jsx)(n.a,{href:"https://volcano.sh/en/",children:"Volcano Scheduler"}),"\uc640 \ud568\uaed8 ",(0,s.jsx)(n.a,{href:"https://pytorch.org/torchx/latest/",children:"TorchX"}),"\ub97c \ud65c\uc6a9\ud569\ub2c8\ub2e4. \ub610\ud55c ",(0,s.jsx)(n.code,{children:"neuron-top"}),"\uc744 \uc0ac\uc6a9\ud558\uc5ec \ud6c8\ub828 \uc911 \ub274\ub7f0 \ud65c\ub3d9\uc744 \ubaa8\ub2c8\ud130\ub9c1\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.h4,{id:"trainium-\uc7a5\uce58-\uc544\ud0a4\ud14d\ucc98",children:"Trainium \uc7a5\uce58 \uc544\ud0a4\ud14d\ucc98"}),"\n",(0,s.jsxs)(n.p,{children:["\uac01 Trainium \uc7a5\uce58(\uce69)\ub294 \ub450 \uac1c\uc758 \ub274\ub7f0 \ucf54\uc5b4\ub85c \uad6c\uc131\ub429\ub2c8\ub2e4. ",(0,s.jsx)(n.code,{children:"Trn1.32xlarge"})," \uc778\uc2a4\ud134\uc2a4\uc758 \uacbd\uc6b0 ",(0,s.jsx)(n.code,{children:"16\uac1c\uc758 Trainium \uc7a5\uce58"}),"\uac00 \uacb0\ud569\ub418\uc5b4 \ucd1d ",(0,s.jsx)(n.code,{children:"32\uac1c\uc758 Neuron \ucf54\uc5b4"}),"\uac00 \ub429\ub2c8\ub2e4. \uc544\ub798 \ub2e4\uc774\uc5b4\uadf8\ub7a8\uc740 Neuron \uc7a5\uce58 \uc544\ud0a4\ud14d\ucc98\uc758 \uc2dc\uac01\uc801 \ud45c\ud604\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Trainium Device",src:r(20979).A+"",width:"625",height:"556"})}),"\n",(0,s.jsx)(n.h4,{id:"aws-neuron-\ub4dc\ub77c\uc774\ubc84",children:"AWS Neuron \ub4dc\ub77c\uc774\ubc84"}),"\n",(0,s.jsx)(n.p,{children:"Neuron \ub4dc\ub77c\uc774\ubc84\ub294 Trainium/Inferentia \uc778\uc2a4\ud134\uc2a4\uc640 \uac19\uc740 AWS Inferentia \uae30\ubc18 \uac00\uc18d\uae30\uc758 \ud638\uc2a4\ud2b8 \uc6b4\uc601 \uccb4\uc81c\uc5d0 \uc124\uce58\ub418\ub294 \ud544\uc218 \uc18c\ud504\ud2b8\uc6e8\uc5b4 \uad6c\uc131 \uc694\uc18c \uc138\ud2b8\uc785\ub2c8\ub2e4. \uc8fc\uc694 \uae30\ub2a5\uc740 \uac00\uc18d\uae30 \ud558\ub4dc\uc6e8\uc5b4\uc640 \uae30\ubcf8 \uc6b4\uc601 \uccb4\uc81c \uac04\uc758 \uc0c1\ud638 \uc791\uc6a9\uc744 \ucd5c\uc801\ud654\ud558\uc5ec \uc6d0\ud65c\ud55c \ud1b5\uc2e0\uacfc \uac00\uc18d\uae30\uc758 \ucef4\ud4e8\ud305 \uae30\ub2a5\uc758 \ud6a8\uc728\uc801\uc778 \ud65c\uc6a9\uc744 \ubcf4\uc7a5\ud558\ub294 \uac83\uc785\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.h4,{id:"aws-neuron-\ub7f0\ud0c0\uc784",children:"AWS Neuron \ub7f0\ud0c0\uc784"}),"\n",(0,s.jsx)(n.p,{children:"Neuron \ub7f0\ud0c0\uc784\uc740 Inferentia \ubc0f Trainium Neuron \uc7a5\uce58\uc5d0 \uc561\uc138\uc2a4\ud558\uae30 \uc704\ud55c API\ub97c \uc81c\uacf5\ud558\ub294 \ucee4\ub110 \ub4dc\ub77c\uc774\ubc84\uc640 C/C++ \ub77c\uc774\ube0c\ub7ec\ub9ac\ub85c \uad6c\uc131\ub429\ub2c8\ub2e4. TensorFlow, PyTorch \ubc0f Apache MXNet\uc6a9 Neuron ML \ud504\ub808\uc784\uc6cc\ud06c \ud50c\ub7ec\uadf8\uc778\uc740 Neuron \ub7f0\ud0c0\uc784\uc744 \uc0ac\uc6a9\ud558\uc5ec NeuronCore\uc5d0\uc11c \ubaa8\ub378\uc744 \ub85c\ub4dc\ud558\uace0 \uc2e4\ud589\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.h4,{id:"kubernetes\uc6a9-aws-neuron-device-plugin",children:"Kubernetes\uc6a9 AWS Neuron Device Plugin"}),"\n",(0,s.jsxs)(n.p,{children:["Kubernetes\uc6a9 AWS Neuron Device Plugin\uc740 EKS \ud074\ub7ec\uc2a4\ud130 \ub0b4\uc5d0\uc11c Trainium/Inferentia \uc7a5\uce58\ub97c \uc2dc\uc2a4\ud15c \ud558\ub4dc\uc6e8\uc5b4 \ub9ac\uc18c\uc2a4\ub85c \uc2b9\uaca9\uc2dc\ud0a4\ub294 \uad6c\uc131 \uc694\uc18c\uc785\ub2c8\ub2e4. ",(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/",children:"DaemonSet"}),"\uc73c\ub85c \ubc30\ud3ec\ub418\uc5b4 \uc7a5\uce58 \ud50c\ub7ec\uadf8\uc778\uc774 \ub178\ub4dc \ubc0f \ud30c\ub4dc \uc8fc\uc11d\uc744 \uc5c5\ub370\uc774\ud2b8\ud560 \uc218 \uc788\ub294 \uc801\uc808\ud55c \uad8c\ud55c\uc744 \ubcf4\uc7a5\ud558\uc5ec Inferentia \uc7a5\uce58\ub97c Kubernetes \ud30c\ub4dc\uc640 \uc6d0\ud65c\ud558\uac8c \ud1b5\ud569\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.h4,{id:"fsx-for-lustre",children:"FSx for Lustre"}),"\n",(0,s.jsx)(n.p,{children:"\uc774 \ube14\ub8e8\ud504\ub9b0\ud2b8\uc5d0\uc11c\ub294 TorchX\ub97c \uc0ac\uc6a9\ud558\uc5ec 2\uac1c\uc758 trn1.32xlarge(\ub610\ub294 trn1n.32xlarge) \uc778\uc2a4\ud134\uc2a4\uc5d0 \ubd84\uc0b0\ub41c 64\uac1c\uc758 \uc6cc\ucee4(\uc778\uc2a4\ud134\uc2a4\ub2f9 32\uac1c \uc6cc\ucee4)\ub97c \uc0ac\uc6a9\ud558\ub294 DataParallel BERT phase1 \uc0ac\uc804 \ud6c8\ub828 \uc791\uc5c5\uc744 \uc2dc\uc791\ud569\ub2c8\ub2e4. BERT phase1 \uc0ac\uc804 \ud6c8\ub828 \ud504\ub85c\uc138\uc2a4\ub294 \ud6c8\ub828 \ub370\uc774\ud130\ub85c 50GB \uc774\uc0c1\uc758 \uc0c1\ub2f9\ud55c WikiCorpus \ub370\uc774\ud130\uc14b\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4. \ub300\uc6a9\ub7c9 \ub370\uc774\ud130\uc14b\uc744 \ud6a8\uc728\uc801\uc73c\ub85c \ucc98\ub9ac\ud558\uae30 \uc704\ud574 \ud6c8\ub828 \ucee8\ud14c\uc774\ub108 \uc774\ubbf8\uc9c0 \ub0b4\uc5d0 \ub370\uc774\ud130\uc14b\uc744 \ud3ec\ud568\ud558\uac70\ub098 \uac01 \uc791\uc5c5 \uc2dc\uc791 \uc2dc \ub2e4\uc6b4\ub85c\ub4dc\ud558\ub294 \uac83\uc740 \uc2e4\uc6a9\uc801\uc774\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ub300\uc2e0 \uc5ec\ub7ec \ucef4\ud4e8\ud305 \uc778\uc2a4\ud134\uc2a4\uac00 \ud6c8\ub828 \ub370\uc774\ud130\uc14b\uc744 \ub3d9\uc2dc\uc5d0 \ucc98\ub9ac\ud560 \uc218 \uc788\ub3c4\ub85d \uacf5\uc720 \ud30c\uc77c \uc2dc\uc2a4\ud15c \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \ud65c\uc6a9\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.p,{children:"\uc774 \ubaa9\uc801\uc744 \uc704\ud574 FSx for Lustre\ub294 \uba38\uc2e0 \ub7ec\ub2dd \uc6cc\ud06c\ub85c\ub4dc\uc5d0 \uc774\uc0c1\uc801\uc778 \uc194\ub8e8\uc158\uc73c\ub85c \ubd80\uc0c1\ud569\ub2c8\ub2e4. \ucd08\ub2f9 \uc218\ubc31 \uae30\uac00\ubc14\uc774\ud2b8\uc758 \ucc98\ub9ac\ub7c9, \uc218\ubc31\ub9cc IOPS \ubc0f \ubc00\ub9ac\ucd08 \ubbf8\ub9cc\uc758 \uc9c0\uc5f0 \uc2dc\uac04\uc73c\ub85c \ub300\uaddc\ubaa8 \ub370\uc774\ud130 \uc138\ud2b8\ub97c \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \uacf5\uc720 \ud30c\uc77c \uc2dc\uc2a4\ud15c \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4. FSx CSI \ucee8\ud2b8\ub864\ub7ec\ub97c \ud1b5\ud574 Persistent Volume Claims(PVC)\ub97c \uc0ac\uc6a9\ud558\uc5ec FSx for Lustre\ub97c \ub3d9\uc801\uc73c\ub85c \uc0dd\uc131\ud558\uace0 \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc744 \ud30c\ub4dc\uc5d0 \uc5f0\uacb0\ud558\uc5ec \ubd84\uc0b0 \ud6c8\ub828 \ud504\ub85c\uc138\uc2a4\uc640 \uacf5\uc720 \ud30c\uc77c \uc2a4\ud1a0\ub9ac\uc9c0\uc758 \uc6d0\ud65c\ud55c \ud1b5\ud569\uc744 \uac00\ub2a5\ud558\uac8c \ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.h4,{id:"torchx",children:"TorchX"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://pytorch.org/torchx/main/quickstart.html",children:"TorchX"})," SDK \ub610\ub294 CLI\ub294 PyTorch \uc791\uc5c5\uc744 Kubernetes\uc5d0 \uc190\uc27d\uac8c \uc81c\ucd9c\ud558\ub294 \uae30\ub2a5\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4. Slurm, Ray, AWS Batch, Kubeflow Pipelines \ubc0f Airflow\uc640 \uac19\uc740 \uc778\uae30 \uc788\ub294 \uc791\uc5c5 \uc2a4\ucf00\uc904\ub7ec\ub97c \ud65c\uc6a9\ud558\uba74\uc11c \ud558\uc774\ud37c\ud30c\ub77c\ubbf8\ud130 \ucd5c\uc801\ud654, \ubaa8\ub378 \uc11c\ube59 \ubc0f \ubd84\uc0b0 \ub370\uc774\ud130 \ubcd1\ub82c\uacfc \uac19\uc740 \uc0ac\uc804 \uc815\uc758\ub41c \uad6c\uc131 \uc694\uc18c\ub97c \uc815\uad50\ud55c \ud30c\uc774\ud504\ub77c\uc778\uc5d0 \uc5f0\uacb0\ud558\ub294 \uae30\ub2a5\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(n.p,{children:["TorchX Kubernetes \uc2a4\ucf00\uc904\ub7ec\ub294 Kubernetes \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc124\uce58\ud574\uc57c \ud558\ub294 ",(0,s.jsx)(n.a,{href:"https://volcano.sh/en/docs/",children:"Volcano Scheduler"}),"\uc5d0 \uc758\uc874\ud569\ub2c8\ub2e4. \ub2e4\uc911 \ubcf5\uc81c\ubcf8/\ub2e4\uc911 \uc5ed\ud560 \uc2e4\ud589\uc5d0\ub294 \uac31 \uc2a4\ucf00\uc904\ub9c1\uc774 \ud544\uc218\uc801\uc774\uba70, \ud604\uc7ac Kubernetes \ub0b4\uc5d0\uc11c \uc774 \uc694\uad6c \uc0ac\ud56d\uc744 \ucda9\uc871\ud558\ub294 \uc720\uc77c\ud558\uac8c \uc9c0\uc6d0\ub418\ub294 \uc2a4\ucf00\uc904\ub7ec\ub294 Volcano\uc785\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.p,{children:"TorchX\ub294 Airflow \ubc0f Kubeflow Pipelines\uc640 \uc6d0\ud65c\ud558\uac8c \ud1b5\ud569\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774 \ube14\ub8e8\ud504\ub9b0\ud2b8\uc5d0\uc11c\ub294 \ub85c\uceec \uba38\uc2e0/Cloud9 IDE\uc5d0 TorchX CLI\ub97c \uc124\uce58\ud558\uace0 \uc774\ub97c \uc0ac\uc6a9\ud558\uc5ec EKS \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc791\uc5c5 \uc81c\ucd9c\uc744 \ud2b8\ub9ac\uac70\ud569\ub2c8\ub2e4. \uadf8\ub7ec\uba74 EKS \ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c \uc2e4\ud589 \uc911\uc778 Volcano \uc2a4\ucf00\uc904\ub7ec \ud050\uc5d0 \uc791\uc5c5\uc774 \uc81c\ucd9c\ub429\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.h4,{id:"volcano-scheduler",children:"Volcano Scheduler"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://volcano.sh/en/docs/",children:"Volcano Scheduler"}),"\ub294 \ub2e4\uc591\ud55c \uc6cc\ud06c\ub85c\ub4dc\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \uad00\ub9ac\ud558\ub3c4\ub85d \uc124\uacc4\ub41c \ucee4\uc2a4\ud140 Kubernetes \ubc30\uce58 \uc2a4\ucf00\uc904\ub7ec\ub85c, \uba38\uc2e0 \ub7ec\ub2dd\uacfc \uac19\uc740 \ub9ac\uc18c\uc2a4 \uc9d1\uc57d\uc801\uc778 \uc791\uc5c5\uc5d0 \ud2b9\ud788 \uc801\ud569\ud569\ub2c8\ub2e4. Volcano Queue\ub294 PodGroup\uc758 \uceec\ub809\uc158\uc73c\ub85c \uc791\ub3d9\ud558\uba70 FIFO(\uc120\uc785\uc120\ucd9c) \ubc29\uc2dd\uc744 \ucc44\ud0dd\ud558\uc5ec \ub9ac\uc18c\uc2a4 \ud560\ub2f9\uc758 \uae30\ubc18\uc744 \ud615\uc131\ud569\ub2c8\ub2e4. ",(0,s.jsx)(n.code,{children:"vcjob"}),"\uc774\ub77c\uace0\ub3c4 \uc54c\ub824\uc9c4 VolcanoJob\uc740 Volcano\ub97c \uc704\ud574 \ud2b9\ubcc4\ud788 \uc124\uacc4\ub41c Custom Resource Definition(CRD) \uac1d\uccb4\uc785\ub2c8\ub2e4. \uc9c0\uc815\ub41c \uc2a4\ucf00\uc904\ub7ec, \ucd5c\uc18c \uba64\ubc84 \uc694\uad6c \uc0ac\ud56d, \uc791\uc5c5 \uc815\uc758, \uc218\uba85 \uc8fc\uae30 \uad00\ub9ac, \ud2b9\uc815 \ud050 \ud560\ub2f9 \ubc0f \uc6b0\uc120 \uc21c\uc704 \uc124\uc815\uc744 \ud3ec\ud568\ud55c \uace0\uae09 \uae30\ub2a5\uc744 \uc81c\uacf5\ud558\uc5ec \uc77c\ubc18 Kubernetes \uc791\uc5c5\uacfc \ucc28\ubcc4\ud654\ub429\ub2c8\ub2e4. VolcanoJob\uc740 \uba38\uc2e0 \ub7ec\ub2dd, \ube45 \ub370\uc774\ud130 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc0f \uacfc\ud559 \ucef4\ud4e8\ud305\uacfc \uac19\uc740 \uace0\uc131\ub2a5 \ucef4\ud4e8\ud305 \uc2dc\ub098\ub9ac\uc624\uc5d0 \uc774\uc0c1\uc801\uc73c\ub85c \uc801\ud569\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.h3,{id:"\uc194\ub8e8\uc158-\uc544\ud0a4\ud14d\ucc98",children:"\uc194\ub8e8\uc158 \uc544\ud0a4\ud14d\ucc98"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Alt text",src:r(50741).A+"",width:"12492",height:"7950"})}),"\n",(0,s.jsxs)(t.A,{header:(0,s.jsx)(n.h2,{children:(0,s.jsx)(n.span,{children:"\uc194\ub8e8\uc158 \ubc30\ud3ec"})}),children:[(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["\uc774 \ube14\ub8e8\ud504\ub9b0\ud2b8\ub97c \ubc30\ud3ec\ud558\uae30 \uc804\uc5d0 AWS Trainium \uc778\uc2a4\ud134\uc2a4 \uc0ac\uc6a9\uacfc \uad00\ub828\ub41c \ube44\uc6a9\uc744 \uc778\uc9c0\ud558\ub294 \uac83\uc774 \uc911\uc694\ud569\ub2c8\ub2e4. \ube14\ub8e8\ud504\ub9b0\ud2b8\ub294 \ub370\uc774\ud130\uc14b \uc0ac\uc804 \ud6c8\ub828\uc744 \uc704\ud574 \ub450 \uac1c\uc758 ",(0,s.jsx)(n.code,{children:"Trn1.32xlarge"})," \uc778\uc2a4\ud134\uc2a4\ub97c \uc124\uc815\ud569\ub2c8\ub2e4. \uadf8\uc5d0 \ub530\ub77c \uc774\ub7ec\ud55c \ube44\uc6a9\uc744 \ud3c9\uac00\ud558\uace0 \uacc4\ud68d\ud558\uc138\uc694."]})}),(0,s.jsxs)(n.p,{children:["\uc774 ",(0,s.jsx)(n.a,{href:"https://github.com/awslabs/ai-on-eks/tree/main/infra/trainium",children:"\uc608\uc81c"}),"\uc5d0\uc11c\ub294 \ub2e4\uc74c \ub9ac\uc18c\uc2a4\ub97c \ud504\ub85c\ube44\uc800\ub2dd\ud569\ub2c8\ub2e4."]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"2\uac1c\uc758 \ud504\ub77c\uc774\ube57 \uc11c\ube0c\ub137\uacfc 2\uac1c\uc758 \ud37c\ube14\ub9ad \uc11c\ube0c\ub137\uc744 \ud3ec\ud568\ud55c \uc0c8 \uc0d8\ud50c VPC\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.li,{children:"\ud37c\ube14\ub9ad \uc11c\ube0c\ub137\uc6a9 \uc778\ud130\ub137 \uac8c\uc774\ud2b8\uc6e8\uc774\uc640 \ud504\ub77c\uc774\ube57 \uc11c\ube0c\ub137\uc6a9 NAT \uac8c\uc774\ud2b8\uc6e8\uc774\ub97c \uc124\uc815\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsxs)(n.li,{children:["\ud37c\ube14\ub9ad \uc5d4\ub4dc\ud3ec\uc778\ud2b8(\ub370\ubaa8 \ubaa9\uc801\uc73c\ub85c\ub9cc)\uc640 \ucf54\uc5b4 \uad00\ub9ac\ud615 \ub178\ub4dc \uadf8\ub8f9\uc774 \uc788\ub294 EKS \ud074\ub7ec\uc2a4\ud130 \ucee8\ud2b8\ub864 \ud50c\ub808\uc778\uc744 \ubc30\ud3ec\ud569\ub2c8\ub2e4. \ub610\ud55c 2\uac1c\uc758 \uc778\uc2a4\ud134\uc2a4\uac00 \uc788\ub294 ",(0,s.jsx)(n.code,{children:"trn1-32xl-ng1"}),"\uacfc 0\uac1c\uc758 \uc778\uc2a4\ud134\uc2a4\uac00 \uc788\ub294 ",(0,s.jsx)(n.code,{children:"trn1n-32xl-ng"}),"\uc758 \ub450 \uac1c\uc758 \ucd94\uac00 \ub178\ub4dc \uadf8\ub8f9\uc744 \uc124\uc815\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.li,{children:"trn1-32xl-ng1 \ub178\ub4dc \uadf8\ub8f9\uc758 \ubd80\ud2b8\uc2a4\ud2b8\ub7a9 \uc124\uc815 \uc911\uc5d0 EFA \ud328\ud0a4\uc9c0\ub97c \uc124\uce58\ud558\uace0 \uac01 \uc778\uc2a4\ud134\uc2a4\uc5d0 EFA\uac00 \uc788\ub294 8\uac1c\uc758 Elastic Network Interface(ENI)\ub97c \uad6c\uc131\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.li,{children:"Neuron \ub4dc\ub77c\uc774\ubc84\uc640 \ub7f0\ud0c0\uc784\uc774 \ud3ec\ud568\ub41c Trainium \ub178\ub4dc \uadf8\ub8f9\uc5d0 EKS GPU AMI\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.li,{children:"Metrics server, Cluster Autoscaler, Karpenter, Grafana, AMP \ubc0f Prometheus \uc11c\ubc84\uc640 \uac19\uc740 \ud544\uc218 \uc560\ub4dc\uc628\uc744 \ubc30\ud3ec\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.li,{children:"\uacf5\uc720 \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc5d0 \ub300\ud55c \ub3d9\uc801 Persistent Volume Claim(PVC) \uc0dd\uc131\uc744 \ud5c8\uc6a9\ud558\ub3c4\ub85d FSx for Lustre CSI \ub4dc\ub77c\uc774\ubc84\ub97c \ud65c\uc131\ud654\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.li,{children:"Kubernetes\uc5d0\uc11c \ud6a8\uc728\uc801\uc778 \uc791\uc5c5 \uc2a4\ucf00\uc904\ub9c1\uc744 \uc704\ud574 PyTorch \uc791\uc5c5 \uc81c\ucd9c\uc6a9 Volcano Scheduler\ub97c \uc124\uc815\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.li,{children:"TorchX\uc758 \uc0ac\uc804 \uc694\uad6c \uc0ac\ud56d\uc73c\ub85c \ud544\uc694\ud55c etcd \uc124\uc815\uc744 \uc900\ube44\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.li,{children:"\uc774 \ud2b9\uc815 \ud050\uc5d0 TorchX \uc791\uc5c5 \uc81c\ucd9c\uc744 \ud65c\uc131\ud654\ud558\uae30 \uc704\ud574 Volcano \ub0b4\uc5d0 \ud14c\uc2a4\ud2b8 \ud050\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."}),"\n"]}),(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\uc911\uc694"}),": \uc774 \uc124\uc815\uc5d0\uc11c Karpenter\ub294 \ud604\uc7ac \ucee4\uc2a4\ud140 \ub124\ud2b8\uc6cc\ud0b9 \uc778\ud130\ud398\uc774\uc2a4 \uad6c\uc131\uc758 \uc81c\ud55c\uc73c\ub85c \uc778\ud574 ",(0,s.jsx)(n.code,{children:"inferentia-inf2"})," \uc778\uc2a4\ud134\uc2a4\uc5d0\ub9cc \ub3c5\uc810\uc801\uc73c\ub85c \uc0ac\uc6a9\ub429\ub2c8\ub2e4. Trainium \uc778\uc2a4\ud134\uc2a4\uc758 \uacbd\uc6b0 \uad00\ub9ac\ud615 \ub178\ub4dc \uadf8\ub8f9\uacfc Cluster Autoscaler\uac00 \ud655\uc7a5 \ubaa9\uc801\uc73c\ub85c \uc0ac\uc6a9\ub429\ub2c8\ub2e4. \uc774\uc804 \ubc84\uc804\uc758 Karpenter(\ud2b9\ud788 ",(0,s.jsx)(n.code,{children:"v1alpha5"})," API)\ub97c \uc0ac\uc6a9\ud558\ub294 \uc0ac\uc6a9\uc790\uc758 \uacbd\uc6b0 ",(0,s.jsx)(n.code,{children:"LaunchTemplates"}),"\ub97c \uc0ac\uc6a9\ud55c Trainium \uad6c\uc131\uc740 \uc5ec\uc804\ud788 \uc561\uc138\uc2a4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud30c\uc77c \ub05d\uc5d0 \uc8fc\uc11d \ucc98\ub9ac\ub418\uc5b4 \uc788\uc9c0\ub9cc ",(0,s.jsx)(n.code,{children:"data-on-eks/infra/trainium-inferentia/addons.tf"})," \ud30c\uc77c\uc5d0\uc11c \ucc3e\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]})}),(0,s.jsx)(n.h3,{id:"\uc0ac\uc804-\uc694\uad6c-\uc0ac\ud56d",children:"\uc0ac\uc804 \uc694\uad6c \uc0ac\ud56d"}),(0,s.jsx)(n.p,{children:"\uba38\uc2e0\uc5d0 \ub2e4\uc74c \ub3c4\uad6c\uac00 \uc124\uce58\ub418\uc5b4 \uc788\ub294\uc9c0 \ud655\uc778\ud558\uc138\uc694."}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html",children:"aws cli"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://Kubernetes.io/docs/tasks/tools/",children:"kubectl"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://learn.hashicorp.com/tutorials/terraform/install-cli",children:"terraform"})}),"\n"]}),(0,s.jsx)(n.h3,{id:"\ubc30\ud3ec",children:"\ubc30\ud3ec"}),(0,s.jsx)(n.p,{children:"\ub9ac\ud3ec\uc9c0\ud1a0\ub9ac \ubcf5\uc81c"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/awslabs/ai-on-eks.git\n"})}),(0,s.jsxs)(n.p,{children:["\uc608\uc81c \ub514\ub809\ud130\ub9ac \uc911 \ud558\ub098\ub85c \uc774\ub3d9\ud558\uc5ec ",(0,s.jsx)(n.code,{children:"install.sh"})," \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"export TF_VAR_enable_fsx_for_lustre=true\nexport TF_VAR_enable_torchx_etcd=true\nexport TF_VAR_enable_volcano=true\n\ncd ai-on-eks/infra/trainium-inferentia/ && chmod +x install.sh\n./install.sh\n"})}),(0,s.jsx)(n.h3,{id:"\ub9ac\uc18c\uc2a4-\ud655\uc778",children:"\ub9ac\uc18c\uc2a4 \ud655\uc778"}),(0,s.jsx)(n.p,{children:"Amazon EKS \ud074\ub7ec\uc2a4\ud130 \ud655\uc778"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"aws eks describe-cluster --name trainium-inferentia\n"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# EKS \uc778\uc99d\uc744 \uc704\ud55c k8s \uad6c\uc131 \ud30c\uc77c \uc0dd\uc131\naws eks --region us-west-2 update-kubeconfig --name trainium-inferentia\n\nkubectl get nodes # \ucd9c\ub825\uc5d0 EKS \uad00\ub9ac\ud615 \ub178\ub4dc \uadf8\ub8f9 \ub178\ub4dc\uac00 \ud45c\uc2dc\ub429\ub2c8\ub2e4\n\n"})})]}),"\n",(0,s.jsx)(n.h3,{id:"aws-cloudwatch-\ubc0f-neuron-monitor\ub97c-\uc0ac\uc6a9\ud55c-\uad00\uce21\uc131",children:"AWS CloudWatch \ubc0f Neuron Monitor\ub97c \uc0ac\uc6a9\ud55c \uad00\uce21\uc131"}),"\n",(0,s.jsxs)(n.p,{children:["\uc774 \ube14\ub8e8\ud504\ub9b0\ud2b8\ub294 \ucee8\ud14c\uc774\ub108\ud654\ub41c \uc6cc\ud06c\ub85c\ub4dc\uc5d0 \ub300\ud55c \ud3ec\uad04\uc801\uc778 \ubaa8\ub2c8\ud130\ub9c1\uc744 \uc81c\uacf5\ud558\ub294 \uad00\ub9ac\ud615 \uc560\ub4dc\uc628\uc73c\ub85c CloudWatch Observability Agent\ub97c \ubc30\ud3ec\ud569\ub2c8\ub2e4. CPU \ubc0f \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub960\uacfc \uac19\uc740 \uc8fc\uc694 \uc131\ub2a5 \uba54\ud2b8\ub9ad\uc744 \ucd94\uc801\ud558\uae30 \uc704\ud55c \ucee8\ud14c\uc774\ub108 \uc778\uc0ac\uc774\ud2b8\ub97c \ud3ec\ud568\ud569\ub2c8\ub2e4. \ub610\ud55c \ube14\ub8e8\ud504\ub9b0\ud2b8\ub294 \uace0\uc131\ub2a5 GPU \uc6cc\ud06c\ub85c\ub4dc \ubaa8\ub2c8\ud130\ub9c1\uc5d0 \ud544\uc218\uc801\uc778 NVIDIA\uc758 DCGM \ud50c\ub7ec\uadf8\uc778\uc744 \uc0ac\uc6a9\ud558\uc5ec GPU \uba54\ud2b8\ub9ad\uc744 \ud1b5\ud569\ud569\ub2c8\ub2e4. AWS Inferentia \ub610\ub294 Trainium\uc5d0\uc11c \uc2e4\ud589\ub418\ub294 \uba38\uc2e0 \ub7ec\ub2dd \ubaa8\ub378\uc758 \uacbd\uc6b0 ",(0,s.jsx)(n.a,{href:"https://awsdocs-neuron.readthedocs-hosted.com/en/latest/tools/neuron-sys-tools/neuron-monitor-user-guide.html#neuron-monitor-user-guide",children:"Neuron Monitor \ud50c\ub7ec\uadf8\uc778"}),"\uc774 Neuron \uad00\ub828 \uba54\ud2b8\ub9ad\uc744 \ucea1\ucc98\ud558\uace0 \ubcf4\uace0\ud558\uae30 \uc704\ud574 \ucd94\uac00\ub429\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.p,{children:"\ucee8\ud14c\uc774\ub108 \uc778\uc0ac\uc774\ud2b8, GPU \uc131\ub2a5 \ubc0f Neuron \uba54\ud2b8\ub9ad\uc744 \ud3ec\ud568\ud55c \ubaa8\ub4e0 \uba54\ud2b8\ub9ad\uc740 Amazon CloudWatch\ub85c \uc804\uc1a1\ub418\uc5b4 \uc2e4\uc2dc\uac04\uc73c\ub85c \ubaa8\ub2c8\ud130\ub9c1\ud558\uace0 \ubd84\uc11d\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ubc30\ud3ec\uac00 \uc644\ub8cc\ub418\uba74 CloudWatch \ucf58\uc194\uc5d0\uc11c \uc9c1\uc811 \uc774\ub7ec\ud55c \uba54\ud2b8\ub9ad\uc5d0 \uc561\uc138\uc2a4\ud558\uc5ec \uc6cc\ud06c\ub85c\ub4dc\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \uad00\ub9ac\ud558\uace0 \ucd5c\uc801\ud654\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.h3,{id:"torchx-\ubc0f-eks\ub97c-\uc0ac\uc6a9\ud55c-trainium\uc5d0\uc11c\uc758-\ubd84\uc0b0-pytorch-\ud6c8\ub828",children:"TorchX \ubc0f EKS\ub97c \uc0ac\uc6a9\ud55c Trainium\uc5d0\uc11c\uc758 \ubd84\uc0b0 PyTorch \ud6c8\ub828"}),"\n",(0,s.jsxs)(n.p,{children:["\uc774 \uc608\uc81c\uc5d0\uc11c\ub294 WikiCorpus \ub370\uc774\ud130\uc14b\uc744 \uc0ac\uc6a9\ud558\uc5ec BERT-large \ubaa8\ub378\uc5d0\uc11c DataParallel \uae30\ubc18 phase1 \uc0ac\uc804 \ud6c8\ub828\uc744 \uc218\ud589\ud569\ub2c8\ub2e4. \uc791\uc5c5\uc744 \uc2e4\ud589\ud558\uae30 \uc704\ud574 TorchX\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc778\uc2a4\ud134\uc2a4\ub2f9 32\uac1c\uc758 \uc6cc\ucee4\uac00 \uc788\ub294 \ub450 \uac1c\uc758 ",(0,s.jsx)(n.code,{children:"trn1.32xlarge"})," \uc778\uc2a4\ud134\uc2a4\uc5d0\uc11c \uc791\uc5c5\uc744 \uc2dc\uc791\ud569\ub2c8\ub2e4. ",(0,s.jsx)(n.code,{children:"trn1n.32xlarge"})," \ub178\ub4dc \uadf8\ub8f9\uc5d0\uc11c\ub3c4 \ub3d9\uc77c\ud55c \uc791\uc5c5\uc744 \uc2e4\ud589\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.p,{children:"\uc791\uc5c5 \uc2e4\ud589\uc744 \ucd5c\ub300\ud55c \uc790\ub3d9\ud654\ud558\uae30 \uc704\ud574 \uc138 \uac1c\uc758 \uc178 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \ub9cc\ub4e4\uc5c8\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.h4,{id:"1\ub2e8\uacc4-bert-large-\ubaa8\ub378-\uc0ac\uc804-\ud6c8\ub828\uc744-\uc704\ud55c-pytorch-neuron-\ucee8\ud14c\uc774\ub108\uc6a9-docker-\uc774\ubbf8\uc9c0-\uc0dd\uc131",children:"1\ub2e8\uacc4: BERT-large \ubaa8\ub378 \uc0ac\uc804 \ud6c8\ub828\uc744 \uc704\ud55c PyTorch Neuron \ucee8\ud14c\uc774\ub108\uc6a9 Docker \uc774\ubbf8\uc9c0 \uc0dd\uc131"}),"\n",(0,s.jsx)(n.p,{children:"\uc774 \ub2e8\uacc4\uc5d0\uc11c\ub294 \uc0c8 Docker \uc774\ubbf8\uc9c0\ub97c \ub9cc\ub4e4\uace0 \uc774 \uc774\ubbf8\uc9c0\ub97c ECR \ub9ac\ud3ec\uc9c0\ud1a0\ub9ac\uc5d0 \ud478\uc2dc\ud569\ub2c8\ub2e4. Dockerfile\uc740 AWS Neuron \ub9ac\ud3ec\uc9c0\ud1a0\ub9ac, Python \uc885\uc18d\uc131 \ubc0f PyTorch\uc640 BERT \uc0ac\uc804 \ud6c8\ub828\uc5d0 \ud544\uc694\ud55c \uae30\ud0c0 \ud544\uc218 \ub3c4\uad6c\uc640 \uac19\uc740 \ud544\uc694\ud55c \uc18c\ud504\ud2b8\uc6e8\uc5b4 \ud328\ud0a4\uc9c0\uc758 \uc124\uce58\ub97c \ucc98\ub9ac\ud569\ub2c8\ub2e4. \uc6d0\ud65c\ud55c \uc2e4\ud589\uacfc \ucd5c\uc801\uc758 \uc131\ub2a5\uc744 \ubcf4\uc7a5\ud558\uae30 \uc704\ud574 \ub2e4\uc591\ud55c \ud658\uacbd \ubcc0\uc218\ub97c \uad6c\uc131\ud569\ub2c8\ub2e4. \uc774\ubbf8\uc9c0\uc5d0\ub294 BERT \uc0ac\uc804 \ud6c8\ub828 \ud504\ub85c\uc138\uc2a4\uc5d0 \uc911\uc694\ud55c GitHub\uc5d0\uc11c \uac00\uc838\uc628 BERT \uc0ac\uc804 \ud6c8\ub828 \uc2a4\ud06c\ub9bd\ud2b8\uc640 requirements.txt \ud30c\uc77c\uacfc \uac19\uc740 \uc911\uc694\ud55c \uad6c\uc131 \uc694\uc18c\uac00 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. \ub610\ud55c \uac80\uc99d \ubaa9\uc801\uc758 \uae30\ubcf8 \ud658\uacbd \ud14c\uc2a4\ud2b8 \uc2a4\ud06c\ub9bd\ud2b8\ub3c4 \ud3ec\ud568\ub429\ub2c8\ub2e4. \uc774 Docker \uc774\ubbf8\uc9c0\ub294 AWS Neuron \ucd5c\uc801\ud654\ub97c \ud1b5\ud569\ud558\uba74\uc11c PyTorch\ub97c \uc0ac\uc6a9\ud55c \ud6a8\uc728\uc801\uc778 BERT \uc0ac\uc804 \ud6c8\ub828\uc744 \uc704\ud55c \ud3ec\uad04\uc801\uc778 \ud658\uacbd\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"\uc774 \ub2e8\uacc4\uc5d0\uc11c\ub294 7GB \uc774\uc0c1 \ud06c\uae30\uc758 AMD64(x86-64) Docker \uc774\ubbf8\uc9c0\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4. \ub530\ub77c\uc11c \uc774 \ud504\ub85c\uc138\uc2a4\ub97c \uc704\ud574 \ucda9\ubd84\ud55c \uc2a4\ud1a0\ub9ac\uc9c0 \uc6a9\ub7c9\uc744 \uac16\ucd98 Docker \ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \uc124\uce58\ub41c AWS Cloud9/EC2 AMD64(x86-64) \uc778\uc2a4\ud134\uc2a4\ub97c \ud65c\uc6a9\ud558\ub294 \uac83\uc774 \uc88b\uc2b5\ub2c8\ub2e4."})}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"EKS \ud074\ub7ec\uc2a4\ud130\uac00 \ubc30\ud3ec\ub41c \uac83\uacfc \ub2e4\ub978 Cloud9 IDE/EC2 \uc778\uc2a4\ud134\uc2a4\uc5d0\uc11c \uc774 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud558\ub294 \uacbd\uc6b0 \ub3d9\uc77c\ud55c IAM \uc5ed\ud560\uc774 Cloud9 IDE/EC2 \uc778\uc2a4\ud134\uc2a4\uc5d0 \uc0ac\uc6a9\ub418\uac70\ub098 \uc5f0\uacb0\ub418\uc5b4 \uc788\ub294\uc9c0 \ud655\uc778\ud558\ub294 \uac83\uc774 \ud544\uc218\uc801\uc785\ub2c8\ub2e4. Cloud9 IDE/EC2\uc5d0 \ubcc4\ub3c4\uc758 IAM \uc5ed\ud560\uc744 \uc120\ud638\ud558\ub294 \uacbd\uc6b0 EKS \ud074\ub7ec\uc2a4\ud130\uc758 aws-auth \uad6c\uc131 \ub9f5\uc5d0 \ucd94\uac00\ud558\uc5ec \uc5ed\ud560\uc774 EKS \ud074\ub7ec\uc2a4\ud130 \uc778\uc99d \uad8c\ud55c\uc744 \ubd80\uc5ec\ubc1b\uc544\uc57c \ud569\ub2c8\ub2e4. \uc774\ub7ec\ud55c \uc608\ubc29 \uc870\uce58\ub97c \ucde8\ud558\uba74 \uc778\uc2a4\ud134\uc2a4\uc640 EKS \ud074\ub7ec\uc2a4\ud130 \uac04\uc758 \uc6d0\ud65c\ud55c \ud1b5\uc2e0\uc774 \uac00\ub2a5\ud558\uc5ec \uc2a4\ud06c\ub9bd\ud2b8\uac00 \uc758\ub3c4\ud55c \ub300\ub85c \uc791\ub3d9\ud569\ub2c8\ub2e4."})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd infra/trainium-inferentia/examples/dp-bert-large-pretrain\nchmod +x 1-bert-pretrain-build-image.sh\n./1-bert-pretrain-build-image.sh\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Admin:~/environment/data-on-eks/infra/trainium-inferentia/examples/dp-bert-large-pretrain (trainium-part2) $ ./1-bert-pretrain-build-image.sh\nDid you install docker on AMD64(x86-64) machine (y/n): y\nEnter the ECR region: us-west-2\nECR repository 'eks_torchx_test' already exists.\nRepository URL: <YOUR_ACCOUNT_ID>.dkr.ecr.us-west-2.amazonaws.com/eks_torchx_test\nBuilding and Tagging Docker image... <YOUR_ACCOUNT_ID>.dkr.ecr.us-west-2.amazonaws.com/eks_torchx_test:bert_pretrain\n[+] Building 2.4s (26/26) FINISHED\n => [internal] load build definition from Dockerfile.bert_pretrain                                                                                                                   0.0s\n => => transferring dockerfile: 5.15kB                                                                                                                                               0.0s\n => [internal] load .dockerignore                                                                                                                                                    0.0s\n => => transferring context: 2B                                                                                                                                                      0.0s\n => [internal] load metadata for docker.io/library/ubuntu:20.04                                                                                                                      0.7s\n => [ 1/22] FROM docker.io/library/ubuntu:20.04@sha256:c9820a44b950956a790c354700c1166a7ec648bc0d215fa438d3a339812f1d01                                                              0.0s\n ...\nbert_pretrain: digest: sha256:1bacd5233d1a87ca1d88273c5a7cb131073c6f390f03198a91dc563158485941 size: 4729\n"})}),"\n",(0,s.jsxs)(n.p,{children:["AWS \ucf58\uc194\uc5d0 \ub85c\uadf8\uc778\ud558\uc5ec ECR\uc758 ECR \ub9ac\ud3ec\uc9c0\ud1a0\ub9ac(",(0,s.jsx)(n.code,{children:"<YOUR_ACCOUNT_ID>.dkr.ecr.<REGION>.amazonaws.com/eks_torchx_test"}),")\uc640 \uc774\ubbf8\uc9c0 \ud0dc\uadf8(",(0,s.jsx)(n.code,{children:"bert_pretrain"}),")\ub97c \ud655\uc778\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.h4,{id:"2\ub2e8\uacc4-bert-\ubaa8\ub378\uc6a9-wikicorpus-\uc0ac\uc804-\ud6c8\ub828-\ub370\uc774\ud130\uc14b\uc744-fsx-for-lustre-\ud30c\uc77c-\uc2dc\uc2a4\ud15c\uc5d0-\ubcf5\uc0ac",children:"2\ub2e8\uacc4: BERT \ubaa8\ub378\uc6a9 WikiCorpus \uc0ac\uc804 \ud6c8\ub828 \ub370\uc774\ud130\uc14b\uc744 FSx for Lustre \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc5d0 \ubcf5\uc0ac"}),"\n",(0,s.jsxs)(n.p,{children:["\uc774 \ub2e8\uacc4\uc5d0\uc11c\ub294 \ubd84\uc0b0 \ubaa8\ub4dc\uc5d0\uc11c \uc5ec\ub7ec Trainium \uc778\uc2a4\ud134\uc2a4\uac00 BERT \ubaa8\ub378\uc744 \ud6c8\ub828\ud558\ub294 \ub370 \uc911\uc694\ud55c WikiCorpus \uc0ac\uc804 \ud6c8\ub828 \ub370\uc774\ud130\uc14b\uc744 FSx for Lustre \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc73c\ub85c \uc27d\uac8c \uc804\uc1a1\ud569\ub2c8\ub2e4. \uc774\ub97c \uc704\ud574 \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc5d0 \ub300\ud55c \uc561\uc138\uc2a4\ub97c \uc81c\uacf5\ud558\ub294 AWS CLI \ucee8\ud14c\uc774\ub108\uac00 \ud3ec\ud568\ub41c ",(0,s.jsx)(n.code,{children:"cmd-shell"})," \ud30c\ub4dc\uc5d0 \ub85c\uadf8\uc778\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(n.p,{children:["\ucee8\ud14c\uc774\ub108 \ub0b4\ubd80\uc5d0 \ub4e4\uc5b4\uac00\uba74 S3 \ubc84\ud0b7(",(0,s.jsx)(n.code,{children:"s3://neuron-s3/training_datasets/bert_pretrain_wikicorpus_tokenized_hdf5/bert_pretrain_wikicorpus_tokenized_hdf5_seqlen128.tar"}),")\uc5d0\uc11c WikiCorpus \ub370\uc774\ud130\uc14b\uc744 \ubcf5\uc0ac\ud569\ub2c8\ub2e4. \uadf8\ub7f0 \ub2e4\uc74c \ub370\uc774\ud130\uc14b\uc774 \uc555\ucd95 \ud574\uc81c\ub418\uc5b4 \ud6c4\uc18d BERT \ubaa8\ub378 \uc0ac\uc804 \ud6c8\ub828 \ud504\ub85c\uc138\uc2a4\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc900\ube44\uac00 \ub41c \ucf58\ud150\uce20\uc5d0 \uc561\uc138\uc2a4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'kubectl exec -i -t -n default cmd-shell -c app -- sh -c "clear; (bash || ash || sh)"\n\n# \ucee8\ud14c\uc774\ub108\uc5d0 \ub85c\uadf8\uc778\ud55c \ud6c4\nyum install tar\ncd /data\naws s3 cp s3://neuron-s3/training_datasets/bert_pretrain_wikicorpus_tokenized_hdf5/bert_pretrain_wikicorpus_tokenized_hdf5_seqlen128.tar . --no-sign-request\nchmod 744 bert_pretrain_wikicorpus_tokenized_hdf5_seqlen128.tar\ntar xvf bert_pretrain_wikicorpus_tokenized_hdf5_seqlen128.tar\n'})}),"\n",(0,s.jsx)(n.h4,{id:"3\ub2e8\uacc4-neuron_parallel_compile\uc744-\uc0ac\uc6a9\ud558\uc5ec-bert-\uadf8\ub798\ud504-\uc0ac\uc804-\ucef4\ud30c\uc77c",children:"3\ub2e8\uacc4: neuron_parallel_compile\uc744 \uc0ac\uc6a9\ud558\uc5ec BERT \uadf8\ub798\ud504 \uc0ac\uc804 \ucef4\ud30c\uc77c"}),"\n",(0,s.jsxs)(n.p,{children:["PyTorch Neuron\uc740 \ubaa8\ub378 \uadf8\ub798\ud504\ub97c \ucd94\ucd9c\ud558\uace0 \ubcd1\ub82c\ub85c \ucef4\ud30c\uc77c\ud558\uc5ec \uadf8\ub798\ud504 \ucef4\ud30c\uc77c \uc2dc\uac04\uc744 \ud06c\uac8c \uc904\uc774\ub294 ",(0,s.jsx)(n.a,{href:"https://awsdocs-neuron.readthedocs-hosted.com/en/latest/frameworks/torch/torch-neuronx/api-reference-guide/training/pytorch-neuron-parallel-compile.html",children:"neuron_parallel_compile"}),"\uc774\ub77c\ub294 \uadc0\uc911\ud55c \ub3c4\uad6c\ub97c \ub3c4\uc785\ud569\ub2c8\ub2e4. \uc774 \ucd5c\uc801\ud654 \uae30\uc220\uc740 \ud504\ub85c\uc138\uc2a4\ub97c \uac00\uc18d\ud654\ud558\uace0 \ub354 \ube60\ub978 \ubaa8\ub378 \ucef4\ud30c\uc77c\uc744 \uac00\uc838\uc635\ub2c8\ub2e4. \ucef4\ud30c\uc77c\ub41c \uadf8\ub798\ud504\ub294 \ubaa8\ub378 \ud6c8\ub828 \uc911 \uc6cc\ucee4 \ub178\ub4dc\uac00 \uc561\uc138\uc2a4\ud560 \uc218 \uc788\ub294 FSx for Lustre \uacf5\uc720 \uc2a4\ud1a0\ub9ac\uc9c0 \ubcfc\ub968\uc5d0 \uc800\uc7a5\ub429\ub2c8\ub2e4. \uc774 \ud6a8\uc728\uc801\uc778 \uc811\uadfc \ubc29\uc2dd\uc740 \ud6c8\ub828 \ud504\ub85c\uc138\uc2a4\ub97c \uac04\uc18c\ud654\ud558\uace0 \uc804\ubc18\uc801\uc778 \uc131\ub2a5\uc744 \ud5a5\uc0c1\uc2dc\ucf1c PyTorch Neuron\uc758 \uae30\ub2a5\uc744 \ucd5c\ub300\ud55c \ud65c\uc6a9\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(n.p,{children:["\ub2e4\uc74c \uba85\ub839\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4. \uc774 \uc2a4\ud06c\ub9bd\ud2b8\ub294 \uc0ac\uc6a9\uc790\uc5d0\uac8c kubeconfig\ub97c \uad6c\uc131\ud558\ub77c\ub294 \uba54\uc2dc\uc9c0\ub97c \ud45c\uc2dc\ud558\uace0 ",(0,s.jsx)(n.code,{children:"trn1_dist_ddp.py"}),"\uac00 \uc788\ub294 ",(0,s.jsx)(n.code,{children:"lib"})," \ud3f4\ub354\uc758 \uc874\uc7ac\ub97c \ud655\uc778\ud569\ub2c8\ub2e4. Docker \uc790\uaca9 \uc99d\uba85\uc744 \uc124\uc815\ud558\uace0 Kubernetes\uc6a9 ",(0,s.jsx)(n.strong,{children:"TorchX"})," \ud074\ub77c\uc774\uc5b8\ud2b8\ub97c \uc124\uce58\ud569\ub2c8\ub2e4. TorchX\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc2a4\ud06c\ub9bd\ud2b8\ub294 \ucd5c\uc801\ud654\ub41c \uc131\ub2a5\uc73c\ub85c BERT \uadf8\ub798\ud504\ub97c \ucef4\ud30c\uc77c\ud558\ub294 Kubernetes \uc791\uc5c5\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4. \ub610\ud55c TorchX\ub294 \ub2e4\ub978 Docker \uc774\ubbf8\uc9c0\ub97c \ub9cc\ub4e4\uace0 \ub3d9\uc77c\ud55c \ub9ac\ud3ec\uc9c0\ud1a0\ub9ac \ub0b4\uc758 ECR \ub9ac\ud3ec\uc9c0\ud1a0\ub9ac\uc5d0 \ud478\uc2dc\ud569\ub2c8\ub2e4. \uc774 \uc774\ubbf8\uc9c0\ub294 \ud6c4\uc18d \uc0ac\uc804 \ucef4\ud30c\uc77c \ud30c\ub4dc\uc5d0\uc11c \ud65c\uc6a9\ub418\uc5b4 \uc804\uccb4 BERT \ubaa8\ub378 \ud6c8\ub828 \ud504\ub85c\uc138\uc2a4\ub97c \ucd5c\uc801\ud654\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd infra/trainium-inferentia/examples/dp-bert-large-pretrain\nchmod +x 2-bert-pretrain-precompile.sh\n./2-bert-pretrain-precompile.sh\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"kubectl get pods"})," \ub610\ub294 ",(0,s.jsx)(n.code,{children:"kubectl get vcjob"}),"\uc744 \uc2e4\ud589\ud558\uc5ec \ud30c\ub4dc \uc0c1\ud0dc\ub97c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc131\uacf5\uc801\uc778 \ucd9c\ub825\uc740 \uc544\ub798\uc640 \uac19\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Alt text",src:r(71883).A+"",width:"2152",height:"1360"})}),"\n",(0,s.jsxs)(n.p,{children:["\ud30c\ub4dc\uac00 ",(0,s.jsx)(n.code,{children:"Succeeded"}),"\ub418\uba74 \ud30c\ub4dc\uc758 \ub85c\uadf8\ub97c \ud655\uc778\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4. \uc0ac\uc804 \ucef4\ud30c\uc77c \uc791\uc5c5\uc740 ",(0,s.jsx)(n.code,{children:"~15\ubd84"})," \ub3d9\uc548 \uc2e4\ud589\ub429\ub2c8\ub2e4. \uc644\ub8cc\ub418\uba74 \ucd9c\ub825\uc5d0 \ub2e4\uc74c\uc774 \ud45c\uc2dc\ub429\ub2c8\ub2e4:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"2023-07-29 09:42:42.000310: INFO ||PARALLEL_COMPILE||: Starting parallel compilations of the extracted graphs2023-07-29 09:42:42.000312: INFO ||PARALLEL_COMPILE||: Compiling /tmp/parallel_compile_workdir/MODULE_SyncTensorsGraph.406_16969875447143373016.hlo.pb using following command: neuronx-cc compile \u2014target=trn1 \u2014framework XLA /tmp/parallel_compile_workdir/MODULE_SyncTensorsGraph.406_16969875447143373016.hlo.pb \u2014model-type=transformer \u2014verbose=35 \u2014output /tmp/parallel_compile_workdir/MODULE_SyncTensorsGraph.406_16969875447143373016.neff\n2023-07-29 09:42:42.000313: INFO ||PARALLEL_COMPILE||: Compiling /tmp/parallel_compile_workdir/MODULE_SyncTensorsGraph.22250_9219523464496887986.hlo.pb using following command: neuronx-cc compile \u2014target=trn1 \u2014framework XLA /tmp/parallel_compile_workdir/MODULE_SyncTensorsGraph.22250_9219523464496887986.hlo.pb \u2014model-type=transformer \u2014verbose=35 \u2014output /tmp/parallel_compile_workdir/MODULE_SyncTensorsGraph.22250_9219523464496887986.neff\n2023-07-29 09:42:42.000314: INFO ||PARALLEL_COMPILE||: Compiling /tmp/parallel_compile_workdir/MODULE_SyncTensorsGraph.25434_3000743782456078279.hlo.pb using following command: neuronx-cc compile \u2014target=trn1 \u2014framework XLA /tmp/parallel_compile_workdir/MODULE_SyncTensorsGraph.25434_3000743782456078279.hlo.pb \u2014model-type=transformer \u2014verbose=35 \u2014output /tmp/parallel_compile_workdir/MODULE_SyncTensorsGraph.25434_3000743782456078279.neff\n2023-07-29 09:42:42.000315: INFO ||PARALLEL_COMPILE||: Compiling /tmp/parallel_compile_workdir/MODULE_SyncTensorsGraph.25637_13822314547392343350.hlo.pb using following command: neuronx-cc compile \u2014target=trn1 \u2014framework XLA /tmp/parallel_compile_workdir/MODULE_SyncTensorsGraph.25637_13822314547392343350.hlo.pb \u2014model-type=transformer \u2014verbose=35 \u2014output /tmp/parallel_compile_workdir/MODULE_SyncTensorsGraph.25637_13822314547392343350.neff\n2023-07-29 09:42:42.000316: INFO ||PARALLEL_COMPILE||: Compiling /tmp/parallel_compile_workdir/MODULE_SyncTensorsGraph.21907_15179678551789598088.hlo.pb using following command: neuronx-cc compile \u2014target=trn1 \u2014framework XLA /tmp/parallel_compile_workdir/MODULE_SyncTensorsGraph.21907_15179678551789598088.hlo.pb \u2014model-type=transformer \u2014verbose=35 \u2014output /tmp/parallel_compile_workdir/MODULE_SyncTensorsGraph.21907_15179678551789598088.neff\n.....\nCompiler status PASS\n"})}),"\n",(0,s.jsx)(n.p,{children:"\uc0c8\ub85c\uc6b4 \uc0ac\uc804 \ud6c8\ub828 \uce90\uc2dc \ud30c\uc77c\uc774 FSx for Lustre\uc5d0 \uc800\uc7a5\ub429\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Alt text",src:r(54621).A+"",width:"1448",height:"286"})}),"\n",(0,s.jsx)(n.h4,{id:"4\ub2e8\uacc4-\ub450-\uac1c\uc758-trn132xlarge-\uc778\uc2a4\ud134\uc2a4\ub85c-64\uac1c\uc758-neuron-\ucf54\uc5b4\ub97c-\uc0ac\uc6a9\ud558\uc5ec-bert-\uc0ac\uc804-\ud6c8\ub828-\uc791\uc5c5-\uc2dc\uc791",children:"4\ub2e8\uacc4: \ub450 \uac1c\uc758 trn1.32xlarge \uc778\uc2a4\ud134\uc2a4\ub85c 64\uac1c\uc758 Neuron \ucf54\uc5b4\ub97c \uc0ac\uc6a9\ud558\uc5ec BERT \uc0ac\uc804 \ud6c8\ub828 \uc791\uc5c5 \uc2dc\uc791"}),"\n",(0,s.jsx)(n.p,{children:"\uc774\uc81c WikiCorpus \ub370\uc774\ud130\ub85c BERT-large \ubaa8\ub378\uc744 \ud6c8\ub828\ud558\ub294 \ucd5c\uc885 \ub2e8\uacc4\uc5d0 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd infra/trainium-inferentia/examples/dp-bert-large-pretrain\nchmod +x 3-bert-pretrain.sh\n./3-bert-pretrain.sh\n"})}),"\n",(0,s.jsx)(n.p,{children:"\ub2e4\uc74c \uba85\ub839\uc73c\ub85c \uc791\uc5c5\uc744 \ubaa8\ub2c8\ud130\ub9c1\ud569\ub2c8\ub2e4. \uc774 \uc791\uc5c5\uc740 30GB \uc774\uc0c1\uc758 \ub370\uc774\ud130\ub97c \ud6c8\ub828\ud558\ubbc0\ub85c \uba87 \uc2dc\uac04\uc774 \uac78\ub9b4 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl get vcjob\nkubectl get pods # \ub450 \uac1c\uc758 \ud30c\ub4dc\uac00 default \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc5d0\uc11c \uc2e4\ud589\ub429\ub2c8\ub2e4\n"})}),"\n",(0,s.jsx)(n.p,{children:"Neuron \uc0ac\uc6a9\ub7c9\uc744 \ubaa8\ub2c8\ud130\ub9c1\ud558\ub824\uba74 EC2 \ucf58\uc194\uc5d0\uc11c SSM(Systems Manager)\uc744 \uc0ac\uc6a9\ud558\uc5ec Trainium EC2 \uc778\uc2a4\ud134\uc2a4 \uc911 \ud558\ub098\uc5d0 \ub85c\uadf8\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub85c\uadf8\uc778\ud55c \ud6c4 neuron-ls \uba85\ub839\uc744 \uc2e4\ud589\ud558\uba74 \ub2e4\uc74c\uacfc \uc720\uc0ac\ud55c \ucd9c\ub825\uc744 \ubc1b\uac8c \ub429\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"[root@ip-100-64-229-201 aws-efa-installer]# neuron-ls\ninstance-type: trn1.32xlarge\ninstance-id: i-04b476a6a0e686980\n+--------+--------+--------+---------------+---------+--------+------------------------------------------+---------+\n| NEURON | NEURON | NEURON | CONNECTED | PCI | PID | COMMAND | RUNTIME |\n| DEVICE | CORES | MEMORY | DEVICES | BDF | | | VERSION |\n+--------+--------+--------+---------------+---------+--------+------------------------------------------+---------+\n| 0 | 2 | 32 GB | 12, 3, 4, 1 | 10:1c.0 | 109459 | python3 -m torch_neuronx.distributed.... | 2.15.11 |\n| 1 | 2 | 32 GB | 13, 0, 5, 2 | 10:1d.0 | 109459 | python3 -m torch_neuronx.distributed.... | 2.15.11 |\n| 2 | 2 | 32 GB | 14, 1, 6, 3 | a0:1c.0 | 109459 | python3 -m torch_neuronx.distributed.... | 2.15.11 |\n| 3 | 2 | 32 GB | 15, 2, 7, 0 | a0:1d.0 | 109459 | python3 -m torch_neuronx.distributed.... | 2.15.11 |\n| 4 | 2 | 32 GB | 0, 7, 8, 5 | 20:1b.0 | 109459 | python3 -m torch_neuronx.distributed.... | 2.15.11 |\n| 5 | 2 | 32 GB | 1, 4, 9, 6 | 20:1c.0 | 109459 | python3 -m torch_neuronx.distributed.... | 2.15.11 |\n| 6 | 2 | 32 GB | 2, 5, 10, 7 | 90:1b.0 | 109459 | python3 -m torch_neuronx.distributed.... | 2.15.11 |\n| 7 | 2 | 32 GB | 3, 6, 11, 4 | 90:1c.0 | 109459 | python3 -m torch_neuronx.distributed.... | 2.15.11 |\n| 8 | 2 | 32 GB | 4, 11, 12, 9 | 20:1d.0 | 109459 | python3 -m torch_neuronx.distributed.... | 2.15.11 |\n| 9 | 2 | 32 GB | 5, 8, 13, 10 | 20:1e.0 | 109459 | python3 -m torch_neuronx.distributed.... | 2.15.11 |\n| 10 | 2 | 32 GB | 6, 9, 14, 11 | 90:1d.0 | 109459 | python3 -m torch_neuronx.distributed.... | 2.15.11 |\n| 11 | 2 | 32 GB | 7, 10, 15, 8 | 90:1e.0 | 109459 | python3 -m torch_neuronx.distributed.... | 2.15.11 |\n| 12 | 2 | 32 GB | 8, 15, 0, 13 | 10:1e.0 | 109459 | python3 -m torch_neuronx.distributed.... | 2.15.11 |\n| 13 | 2 | 32 GB | 9, 12, 1, 14 | 10:1b.0 | 109459 | python3 -m torch_neuronx.distributed.... | 2.15.11 |\n| 14 | 2 | 32 GB | 10, 13, 2, 15 | a0:1e.0 | 109459 | python3 -m torch_neuronx.distributed.... | 2.15.11 |\n| 15 | 2 | 32 GB | 11, 14, 3, 12 | a0:1b.0 | 109459 | python3 -m torch_neuronx.distributed.... | 2.15.11 |\n+--------+--------+--------+---------------+---------+--------+------------------------------------------+---------+\n\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\ub274\ub7f0 \ucf54\uc5b4\uc758 \uc2e4\uc2dc\uac04 \uc0ac\uc6a9\ub7c9\uc744 \uc81c\uacf5\ud558\ub294 ",(0,s.jsx)(n.code,{children:"neuron-top"}),"\uc744 \uc2e4\ud589\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4. \uc544\ub798\ub294 32\uac1c\uc758 \ubaa8\ub4e0 \ub274\ub7f0 \ucf54\uc5b4\uc758 \uc0ac\uc6a9\ub7c9\uc744 \ubcf4\uc5ec\uc90d\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Alt text",src:r(63056).A+"",width:"2116",height:"1204"})}),"\n",(0,s.jsx)(n.p,{children:"\uc791\uc5c5\uc744 \uc885\ub8cc\ud558\ub824\uba74 \ub2e4\uc74c \uba85\ub839\uc744 \uc2e4\ud589\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl get vcjob # \uc791\uc5c5 \uc774\ub984 \uac00\uc838\uc624\uae30\nkubectl delete <ENTER_JOB_NAME>\n"})}),"\n",(0,s.jsxs)(t.A,{header:(0,s.jsx)(n.h2,{children:(0,s.jsx)(n.span,{children:"\uc815\ub9ac"})}),children:[(0,s.jsxs)(n.p,{children:["\uc774 \uc2a4\ud06c\ub9bd\ud2b8\ub294 ",(0,s.jsx)(n.code,{children:"-target"})," \uc635\uc158\uc744 \uc0ac\uc6a9\ud558\uc5ec \ubaa8\ub4e0 \ub9ac\uc18c\uc2a4\uac00 \uc62c\ubc14\ub978 \uc21c\uc11c\ub85c \uc0ad\uc81c\ub418\ub3c4\ub85d \ud658\uacbd\uc744 \uc815\ub9ac\ud569\ub2c8\ub2e4."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ai-on-eks/infra/trainium/terraform && chmod +x cleanup.sh\n./cleanup.sh\n"})})]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"AWS \uacc4\uc815\uc5d0 \uc6d0\uce58 \uc54a\ub294 \uc694\uae08\uc774 \uccad\uad6c\ub418\uc9c0 \uc54a\ub3c4\ub85d \uc774 \ubc30\ud3ec \uc911\uc5d0 \uc0dd\uc131\ub41c \ubaa8\ub4e0 AWS \ub9ac\uc18c\uc2a4\ub97c \uc0ad\uc81c\ud558\uc138\uc694"})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},42450(e,n,r){r.d(n,{A:()=>x});var i=r(96540),s=r(5556),o=r.n(s),t=r(34164);const l="collapsibleContent_q3kw",a="header_QCEw",c="icon_PckA",d="content_qLC1",h="expanded_iGsi";var u=r(74848);function p({children:e,header:n}){const[r,s]=(0,i.useState)(!1);return(0,u.jsxs)("div",{className:l,children:[(0,u.jsxs)("div",{className:(0,t.A)(a,{[h]:r}),onClick:()=>{s(!r)},children:[n,(0,u.jsx)("span",{className:(0,t.A)(c,{[h]:r}),children:r?"\ud83d\udc47":"\ud83d\udc48"})]}),r&&(0,u.jsx)("div",{className:d,children:e})]})}p.propTypes={children:o().node.isRequired,header:o().node.isRequired};const x=p},54621(e,n,r){r.d(n,{A:()=>i});const i=r.p+"assets/images/cache-c20ffd2f2f08427c018edbd418f745af.png"},20979(e,n,r){r.d(n,{A:()=>i});const i=r.p+"assets/images/neuron-device-b6418f956d103a5da9e7087ba07cf949.png"},63056(e,n,r){r.d(n,{A:()=>i});const i=r.p+"assets/images/neuron-top-15b215db91829995ded8d938dc8b3ef8.png"},71883(e,n,r){r.d(n,{A:()=>i});const i=r.p+"assets/images/pre-compile-pod-status-a957a723dd43219aacf123b09c9337ec.png"},50741(e,n,r){r.d(n,{A:()=>i});const i=r.p+"assets/images/trainium-on-eks-arch-7d551d7182d87be5c787267ec74ff22d.png"},28453(e,n,r){r.d(n,{R:()=>t,x:()=>l});var i=r(96540);const s={},o=i.createContext(s);function t(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);